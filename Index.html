<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bubble to Safety</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin: 0;
  background: #0a0a1f;
  overflow: hidden;
  height: 100vh;
}

/* Player bubble */
#player {
  width: 50px;
  height: 50px;
  background: #4ea8de;
  border-radius: 50%;
  position: absolute;
  top: 80%;
  left: 10%;
  transition: top 0.05s, left 0.05s;
  box-shadow: 0 0 12px rgba(78,168,222,0.8);
}

/* Safe zone */
#safe {
  width: 80px;
  height: 80px;
  background: #3ecf8e;
  border-radius: 50%;
  position: absolute;
  top: 10%;
  left: 80%;
  box-shadow: 0 0 25px rgba(62,207,142,0.8);
}

/* Obstacles */
.obstacle {
  width: 50px;
  height: 50px;
  background: #ef476f;
  border-radius: 50%;
  position: absolute;
  top: 30%;
  left: 40%;
  animation: moveX 3s ease-in-out infinite alternate;
}

.obstacle:nth-child(2) { top: 50%; left: 20%; animation-duration: 4s; }
.obstacle:nth-child(3) { top: 60%; left: 60%; animation-duration: 2.5s; }

@keyframes moveX {
  0% { transform: translateX(0); }
  100% { transform: translateX(200px); }
}

/* Win effect */
.win-glow {
  animation: glow 1s infinite alternate;
}

@keyframes glow {
  0% { box-shadow: 0 0 25px rgba(62,207,142,0.8); }
  100% { box-shadow: 0 0 60px rgba(62,207,142,1); }
}
</style>
</head>
<body>

<div id="player"></div>
<div id="safe"></div>
<div class="obstacle"></div>
<div class="obstacle"></div>
<div class="obstacle"></div>

<script>
const player = document.getElementById('player');
const safe = document.getElementById('safe');
const obstacles = document.querySelectorAll('.obstacle');

let pos = { x: 100, y: window.innerHeight*0.8 }; // starting position
const speed = 10;

document.addEventListener('keydown', (e)=>{
  if(e.key === "ArrowUp") pos.y -= speed;
  if(e.key === "ArrowDown") pos.y += speed;
  if(e.key === "ArrowLeft") pos.x -= speed;
  if(e.key === "ArrowRight") pos.x += speed;

  // Keep inside viewport
  pos.x = Math.max(0, Math.min(window.innerWidth - 50, pos.x));
  pos.y = Math.max(0, Math.min(window.innerHeight - 50, pos.y));

  player.style.left = pos.x + "px";
  player.style.top = pos.y + "px";

  checkCollision();
});

function checkCollision(){
  const playerRect = player.getBoundingClientRect();
  const safeRect = safe.getBoundingClientRect();

  // Check win
  if(playerRect.left < safeRect.right &&
     playerRect.right > safeRect.left &&
     playerRect.top < safeRect.bottom &&
     playerRect.bottom > safeRect.top){
       safe.classList.add('win-glow');
       player.style.background = '#3ecf8e';
       player.style.boxShadow = '0 0 25px rgba(62,207,142,0.8)';
  }

  // Check obstacle collision
  obstacles.forEach(ob=>{
    const obsRect = ob.getBoundingClientRect();
    if(playerRect.left < obsRect.right &&
       playerRect.right > obsRect.left &&
       playerRect.top < obsRect.bottom &&
       playerRect.bottom > obsRect.top){
         // Reset player to start
         pos.x = 100;
         pos.y = window.innerHeight*0.8;
         player.style.left = pos.x + "px";
         player.style.top = pos.y + "px";
         player.style.background = '#4ea8de';
         player.style.boxShadow = '0 0 12px rgba(78,168,222,0.8)';
    }
  });
}
</script>

</body>
</html>

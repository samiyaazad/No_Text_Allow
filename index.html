<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title></title>
<style>
html, body {
  margin:0; padding:0; overflow:hidden;
  width:100%; height:100%;
  background: radial-gradient(circle at top,#081a2b,#02060f);
}

/* ===== PLAYER BUBBLE ===== */
#player {
  position:absolute;
  width:50px; height:50px;
  border-radius:50%;
  background: radial-gradient(circle at 30% 30%,#9be7ff,#1fa2ff);
  box-shadow:0 0 25px rgba(100,200,255,.8);
  animation: float 3s ease-in-out infinite;
}
#player::after {
  content:"";
  position:absolute;
  width:12px; height:12px;
  border-radius:50%;
  background:rgba(255,255,255,.6);
  top:8px; left:10px;
}

/* ===== FLOAT ANIMATION ===== */
@keyframes float{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
}

/* ===== SAFE ZONE ===== */
#safe {
  position:absolute;
  width:90px; height:90px;
  border-radius:50%;
  background: radial-gradient(circle,#9bffb0,#2ecc71);
  box-shadow:0 0 40px rgba(80,255,160,1);
  animation:pulse 2s infinite;
}
@keyframes pulse {
  0%{transform:scale(1)}
  50%{transform:scale(1.08)}
  100%{transform:scale(1)}
}

/* ===== OBSTACLES ===== */
.obstacle {
  position:absolute;
  background: radial-gradient(circle,#ff9aa2,#ff2e63);
  border-radius:50%;
  box-shadow:0 0 20px rgba(255,80,120,.9);
}
.wall {
  position:absolute;
  width:14px; height:140px;
  background: linear-gradient(#ff416c,#ff4b2b);
  box-shadow:0 0 20px rgba(255,70,70,.8);
}
.ring {
  position:absolute;
  width:60px; height:60px;
  border:4px solid rgba(255,150,150,.8);
  border-radius:50%;
}

/* ===== PARTICLES ===== */
.particle {
  position:absolute;
  width:8px; height:8px;
  border-radius:50%;
  background:#9bffb0;
  box-shadow:0 0 15px #9bffb0;
  pointer-events:none;
}

/* ===== RIPPLE ===== */
.ripple {
  position:absolute;
  border:3px solid rgba(150,255,200,.7);
  border-radius:50%;
  animation:ripple 1s ease-out forwards;
}
@keyframes ripple {
  from{transform:scale(.2);opacity:1}
  to{transform:scale(3);opacity:0}
}

/* ===== BUBBLE TRAIL ===== */
.trail {
  position:absolute;
  width:10px; height:10px;
  border-radius:50%;
  background: rgba(155,255,192,.5);
  pointer-events:none;
}
</style>
</head>
<body>

<div id="player"></div>
<div id="safe"></div>

<script>
const player = document.getElementById("player")
const safe = document.getElementById("safe")
let px = 80, py = window.innerHeight-120
const speed = 7
let level = 1, maxLevels = 3

safe.style.left = (window.innerWidth-140)+"px"
safe.style.top = "60px"

const obstacles = [], walls=[], rings=[]

// ===== LEVELS =====
function spawn(level){
  obstacles.forEach(o=>o.remove())
  walls.forEach(w=>w.remove())
  rings.forEach(r=>r.remove())
  obstacles.length=walls.length=rings.length=0

  const obsCount = 3+level*2
  for(let i=0;i<obsCount;i++){
    const o = document.createElement("div")
    o.className="obstacle"
    o.size=40+Math.random()*20
    o.style.width=o.style.height=o.size+"px"
    o.x=Math.random()*(innerWidth-o.size)
    o.y=Math.random()*(innerHeight-o.size)
    o.dx=(Math.random()<.5?-1:1)*(2+Math.random()*level)
    o.dy=(Math.random()<.5?-1:1)*(2+Math.random()*level)
    document.body.appendChild(o)
    obstacles.push(o)
  }

  const wallCount = level
  for(let i=0;i<wallCount;i++){
    const w=document.createElement("div")
    w.className="wall"
    w.x=Math.random()*(innerWidth-50)
    w.y=Math.random()*(innerHeight-200)
    w.dy=3+Math.random()*level
    document.body.appendChild(w)
    walls.push(w)
  }

  const ringCount = Math.floor(level/2)
  for(let i=0;i<ringCount;i++){
    const r=document.createElement("div")
    r.className="ring"
    r.x=Math.random()*(innerWidth-60)
    r.y=Math.random()*(innerHeight-60)
    r.angle=0.02+Math.random()*0.04
    document.body.appendChild(r)
    rings.push(r)
  }
}
spawn(level)

// ===== INPUT =====
document.addEventListener("keydown", e=>{
  if(e.key==="ArrowUp") py-=speed
  if(e.key==="ArrowDown") py+=speed
  if(e.key==="ArrowLeft") px-=speed
  if(e.key==="ArrowRight") px+=speed
})

// ===== PARTICLES =====
function explode(x,y){
  for(let i=0;i<35;i++){
    const p=document.createElement("div")
    p.className="particle"
    p.style.left=x+"px"
    p.style.top=y+"px"
    document.body.appendChild(p)
    const a=Math.random()*Math.PI*2
    const d=40+Math.random()*80
    p.animate([
      {transform:"translate(0,0)",opacity:1},
      {transform:`translate(${Math.cos(a)*d}px,${Math.sin(a)*d}px)`,opacity:0}
    ],{duration:1000,easing:"ease-out",fill:"forwards"})
    setTimeout(()=>p.remove(),1000)
  }
  const r=document.createElement("div")
  r.className="ripple"
  r.style.left=(x-20)+"px"
  r.style.top=(y-20)+"px"
  r.style.width="40px"
  r.style.height="40px"
  document.body.appendChild(r)
  setTimeout(()=>r.remove(),1000)
}

// ===== BUBBLE TRAIL =====
function trail(){
  const t=document.createElement("div")
  t.className="trail"
  t.style.left=px+20+"px"
  t.style.top=py+20+"px"
  document.body.appendChild(t)
  t.animate([{opacity:0.5},{opacity:0}],{duration:400,fill:"forwards"})
  setTimeout(()=>t.remove(),400)
}

// ===== LOOP =====
function loop(){
  px=Math.max(0,Math.min(innerWidth-50,px))
  py=Math.max(0,Math.min(innerHeight-50,py))
  player.style.left=px+"px"
  player.style.top=py+"px"
  trail()

  obstacles.forEach(o=>{
    o.x+=o.dx
    o.y+=o.dy
    if(o.x<0||o.x>innerWidth-o.size)o.dx*=-1
    if(o.y<0||o.y>innerHeight-o.size)o.dy*=-1
    o.style.left=o.x+"px"
    o.style.top=o.y+"px"
    if(hit(player,o)) reset()
  })

  walls.forEach(w=>{
    w.y+=w.dy
    if(w.y>innerHeight) w.y=-160
    w.style.left=w.x+"px"
    w.style.top=w.y+"px"
    if(hit(player,w)) reset()
  })

  rings.forEach(r=>{
    r.angle*=-1
    r.x+=Math.cos(r.angle*10)
    r.y+=Math.sin(r.angle*10)
    r.style.transform=`translate(${r.x}px,${r.y}px) rotate(${Date.now()*0.003}rad)`
    if(hit(player,r)) reset()
  })

  if(hit(player,safe)){
    explode(px+24,py+24)
    setTimeout(()=>{
      px=80; py=innerHeight-120
      safe.style.left=Math.random()*(innerWidth-120)+60+"px"
      safe.style.top=Math.random()*200+40+"px"
      level++; if(level>maxLevels) level=1
      spawn(level)
    },800)
  }

  requestAnimationFrame(loop)
}
loop()

function hit(a,b){
  const A=a.getBoundingClientRect()
  const B=b.getBoundingClientRect()
  return A.left<B.right&&A.right>B.left&&A.top<B.bottom&&A.bottom>B.top
}
function reset(){px=80; py=innerHeight-120}

</script>
</body>
</html>
